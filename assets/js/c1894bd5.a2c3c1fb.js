"use strict";(self.webpackChunkmaap_docs=self.webpackChunkmaap_docs||[]).push([[5101],{923:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var o=t(4848),r=t(8453);const a={sidebar_position:2},i="Document Store",s={id:"framework/app-modules/vector-store",title:"Document Store",description:"MongoDB as the Document Store.",source:"@site/docs/framework/app-modules/vector-store.md",sourceDirName:"framework/app-modules",slug:"/framework/app-modules/vector-store",permalink:"/maap-framework/docs/framework/app-modules/vector-store",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"User Interface (UI)",permalink:"/maap-framework/docs/framework/app-modules/ui"},next:{title:"Data Loaders",permalink:"/maap-framework/docs/framework/app-modules/data-ingestion/data-loader"}},d={},l=[{value:"Introduction",id:"introduction",level:2},{value:"Setting up",id:"setting-up",level:2},{value:"Vector Store",id:"vector-store",level:3},{value:"ODL (Operational Data Layer)",id:"odl-operational-data-layer",level:3}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"document-store",children:"Document Store"}),"\n",(0,o.jsx)(n.p,{children:"MongoDB as the Document Store."}),"\n",(0,o.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,o.jsx)(n.p,{children:"Atlas Vector Search lets you search unstructured data. You can create vector embeddings with machine learning models like OpenAI and Hugging Face, and store and index them in Atlas for retrieval augmented generation (RAG), semantic search, recommendation engines, dynamic personalization, and other use cases."}),"\n",(0,o.jsx)(n.h2,{id:"setting-up",children:"Setting up"}),"\n",(0,o.jsx)(n.h3,{id:"vector-store",children:"Vector Store"}),"\n",(0,o.jsx)(n.p,{children:"By following the steps given below you can setup MongoDB to be used as a vector store for your gen AI application."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["To get started with MongoDB and building gen AI application with it, you will need to sign-up to ",(0,o.jsx)(n.a,{href:"https://cloud.mongodb.com",children:"MongoDB Atlas"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["You can deploy a cluster (use M0 for free-tier), and start working with it to set up the application. The detailed steps can be found ",(0,o.jsx)(n.a,{href:"https://www.mongodb.com/docs/guides/atlas/cluster/",children:"here"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Once the Cluster is deployed you will need to feed ",(0,o.jsx)(n.code,{children:"config.yaml"})," file with the below details to complete the setup."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"vector_store:\n    connectionString: '<you_mdb_connection_string>'\n    dbName: '<db_name>'\n    collectionName: 'embedded_content'\n    embeddingKey: 'embedding'\n    textKey: 'text'\n    numCandidates: 150\n    minScore: 0.1 \n    vectorSearchIndexName: 'vector_index'\n"})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"odl-operational-data-layer",children:"ODL (Operational Data Layer)"}),"\n",(0,o.jsx)(n.p,{children:"Follow the below steps to setup MongoDB as an operational data layer;"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"The setup requires 2 files to be created;"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Query file;\nThis is a ",(0,o.jsx)(n.code,{children:"txt"})," file containing the operational query to be made to MongoDB.\nEg."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'    [{"$match": {"$or": [{"fistName": "John"}, {"lastName": "Doe"}]}}, {"$project": {"_id": 0 , "message": 1}}]\n'})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"System Prompt file;\nThe prompt to be provided for the LLM, this can be modified based on the needs of the application and how the LLM should respond.\nEg."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"You are a helpful human like chat bot. Use relevant provided context and chat history to answer the query at the end. Answer in full. \nIf you don't know the answer, just say that you don't know, don't try to make up an answer. \nDo not use words like context or training data when responding. You can say you do not have all the information but do not indicate that you are not a reliable source.\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Once the above files are in place, add the following in ",(0,o.jsx)(n.code,{children:"config.yaml"})," file with updated values;"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"aggregate_operators:\n    - connectionString: \"<your_mdb_connection_string>\"\n    dbName: '<db_name>'\n    collectionName: '<collection_name>'\n    aggregatePipelineName: '<pipeline_name>'\n    queryFilePath: '<your_mql_query_file_path>'\n\nsystemPromptPath: '<your_system_prompt_file_path>'\n\n"})}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>s});var o=t(6540);const r={},a=o.createContext(r);function i(e){const n=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(a.Provider,{value:n},e.children)}}}]);